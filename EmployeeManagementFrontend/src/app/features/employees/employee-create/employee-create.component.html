<div class="page-shell">
  <mat-card class="card">
    <mat-card-content>
      <form
        [formGroup]="f"
        (ngSubmit)="onSubmit()"
        class="form"
        autocomplete="on"
        novalidate
      >
        <div class="row">
          <mat-form-field appearance="outline" class="full">
            <mat-label>First name</mat-label>
            <input matInput formControlName="firstName" />
            <mat-error *ngIf="controls['firstName']?.hasError('required')"
              >Required</mat-error
            >
            <mat-error *ngIf="controls['firstName']?.hasError('server')">{{
              controls["firstName"].getError("server")
            }}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="full">
            <mat-label>Last name</mat-label>
            <input matInput formControlName="lastName" />
            <mat-error *ngIf="controls['lastName']?.hasError('required')"
              >Required</mat-error
            >
            <mat-error *ngIf="controls['lastName']?.hasError('server')">{{
              controls["lastName"].getError("server")
            }}</mat-error>
          </mat-form-field>
        </div>

        <mat-form-field appearance="outline" class="full">
          <mat-label>Phone number</mat-label>
          <input matInput formControlName="phoneNumber" />
          <mat-error *ngIf="controls['phoneNumber']?.hasError('required')"
            >Required</mat-error
          >
          <mat-error *ngIf="controls['phoneNumber']?.hasError('pattern')"
            >Invalid phone</mat-error
          >
          <mat-error *ngIf="controls['phoneNumber']?.hasError('server')">{{
            controls["phoneNumber"].getError("server")
          }}</mat-error>
        </mat-form-field>

        <div class="row">
          <mat-form-field appearance="outline" class="flex-2">
            <mat-label>National ID</mat-label>
            <input matInput formControlName="nationalId" />
            <mat-error *ngIf="controls['nationalId']?.hasError('required')"
              >Required</mat-error
            >
            <mat-error *ngIf="controls['nationalId']?.hasError('minlength')"
              >Minimum length required</mat-error
            >
            <mat-error *ngIf="controls['nationalId']?.hasError('server')">{{
              controls["nationalId"].getError("server")
            }}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="flex-1">
            <mat-label>Age</mat-label>
            <input matInput type="number" formControlName="age" />
            <mat-error *ngIf="controls['age']?.hasError('required')"
              >Required</mat-error
            >
            <mat-error *ngIf="controls['age']?.hasError('min')"
              >Invalid age</mat-error
            >
            <mat-error *ngIf="controls['age']?.hasError('server')">{{
              controls["age"].getError("server")
            }}</mat-error>
          </mat-form-field>
        </div>

        <div class="actions">
          <button
            mat-flat-button
            color="primary"
            type="submit"
            [disabled]="f.invalid || loading"
          >
            {{ loading ? "Creatingâ€¦" : "Create" }}
          </button>
        </div>
      </form>
    </mat-card-content>

    <mat-card-actions class="card-footer">
      <pre *ngIf="result" class="result">{{ result | json }}</pre>
    </mat-card-actions>
  </mat-card>
</div>
